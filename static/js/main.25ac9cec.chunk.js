(this.webpackJsonpRatingsMap=this.webpackJsonpRatingsMap||[]).push([[0],{174:function(t){t.exports=JSON.parse('{"apikey":"14f8eef1"}')},176:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(14),s=n.n(i),o=n(120),c=n(17),u=n(71),l=n.n(u),h=n(93),p=n(58),d=n(59),b=n(60),f=n(70),j=n(69),g=n(62),m=n.n(g),v=n(95),O=n(180),x=n(228),k=n(124),w=n(4),y=n(30),C=n(227),S=n(52),R=n(86),N=n(118),I=n(13),M=n(229),B=n(230),E=n(231),G=n(9),D=Object(N.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:Object(y.a)({flexGrow:1,display:"none"},t.breakpoints.up("sm"),{display:"block"}),search:Object(y.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(I.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(I.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"}),searchIcon:{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),"px)"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function J(t){var e=D();return Object(G.jsx)("div",{className:e.root,children:Object(G.jsx)(C.a,{children:Object(G.jsxs)(x.a,{children:[Object(G.jsx)(S.a,{color:"inherit",href:"https://georgefane.github.io/",children:Object(G.jsx)(M.a,{})}),Object(G.jsx)(O.a,{variant:"h6",className:e.title,children:"RatingsMap"}),Object(G.jsx)(O.a,{variant:"body1",className:e.title,children:"Generate heatmaps for TV show ratings"}),Object(G.jsxs)("div",{className:e.search,children:[Object(G.jsx)("div",{className:e.searchIcon,children:Object(G.jsx)(B.a,{})}),Object(G.jsx)("form",{onSubmit:t.onSubmit,children:Object(G.jsx)(R.a,{value:t.text,onChange:t.onChange,placeholder:"Search Show",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})})]}),Object(G.jsx)(S.a,{color:"inherit",href:"https://github.com/GeorgeFane/ratingsmap",target:"_blank",children:Object(G.jsx)(E.a,{})})]})})})}n(237),n(233),n(234),n(122);var T=n(232),A=Object(N.a)((function(t){return{root:{width:"100%"},heading:{fontSize:t.typography.pxToRem(15),fontWeight:t.typography.fontWeightRegular}}}));function L(t){A();var e=t.rows.filter((function(t){return"N/A"!==t.Poster})).map((function(e){return Object(G.jsx)(T.a,{item:!0,onClick:function(){return t.onClick(e.imdbID)},children:Object(G.jsx)("img",{src:e.Poster,alt:e.Title,width:144})})}));return Object(G.jsx)(T.a,{container:!0,justify:"left",spacing:2,children:e})}var P=n(174).apikey,F="darkGreen darkGreen green goldenRod darkGoldenRod indianRed fireBrick fireBrick fireBrick fireBrick fireBrick".split(" "),W="https://www.omdbapi.com/";function z(t){var e={apikey:P,s:t};return m.a.get(W,{params:e}).then((function(t){return t.data.Search||[]}))}function H(t){var e={apikey:P,i:t};return m.a.get(W,{params:e}).then((function(t){return t.data||[]}))}function V(t,e){var n={apikey:P,i:t,Season:e};return m.a.get(W,{params:n})}function _(t,e){for(var n=[],a=0;a<e;a++)n.push(V(t,a+1));return m.a.all(n).then(m.a.spread((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map((function(t){return t.data}))})))}var q=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).setText=function(t){console.log(t),a.setState({text:t})},a.state={text:"",rows:[],show:{},seasons:[]},a.onChange=a.onChange.bind(Object(b.a)(a)),a.onSubmit=a.onSubmit.bind(Object(b.a)(a)),a.onClick=a.onClick.bind(Object(b.a)(a)),a}return Object(d.a)(n,[{key:"onChange",value:function(t){t.preventDefault();var e=t.target.value;console.log(e),this.setState({text:e})}},{key:"onSubmit",value:function(){var t=Object(h.a)(l.a.mark((function t(e){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,z(this.state.text);case 3:n=t.sent,a={},this.setState({rows:n,show:a});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onClick",value:function(){var t=Object(h.a)(l.a.mark((function t(e){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(e);case 2:return n=t.sent,a=[],this.setState({show:n,rows:a}),t.next=7,_(this.state.show.imdbID,Number(this.state.show.totalSeasons));case 7:r=t.sent,this.setState({seasons:r});case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"RatingsMap",value:function(){var t,e=this.props.classes,n=this.state.seasons;if(n.length){var a=n.map((function(t,e){var n={id:e+1};return t.Episodes.forEach((function(t){n[t.Episode]=t})),n}));console.log(a);for(var r=a.map((function(t){return Object.keys(t)})),i=(t=Array.prototype).concat.apply(t,Object(c.a)(r)),s=Math.max.apply(Math,Object(c.a)(i.filter((function(t){return"id"!==t})).map((function(t){return parseInt(t)})))),u=function(t){return Object(G.jsx)(v.a,{title:Object(G.jsx)(O.a,{component:"pre",children:JSON.stringify(t.value,null,4)}),children:Object(G.jsx)(O.a,{children:t.value?t.value.imdbRating:null})})},l=[{field:"id",headerName:"S\\E"}],h=0;h<s;h++)l.push({field:h+1,renderCell:u});console.log(l);var p={rows:a,columns:l,getCellClassName:function(t){if("id"!==t.field&&t.value){var e=parseInt(t.value.imdbRating);return F[10-e]}},autoHeight:!0,className:e.root};return Object(G.jsxs)("div",{children:[Object(G.jsx)(O.a,{children:"*First row is the first season, second row is the second season, etc"}),Object(G.jsx)(k.a,Object(o.a)({},p))]})}}},{key:"render",value:function(){var t=this.props.classes;return Object(G.jsxs)("div",{children:[Object(G.jsx)(J,{text:this.state.text,onChange:this.onChange,onSubmit:this.onSubmit}),Object(G.jsx)(x.a,{}),Object(G.jsxs)("div",{className:t.root,children:[Object(G.jsx)(L,{rows:this.state.rows,onClick:this.onClick}),this.RatingsMap()]})]})}}]),n}(r.a.Component),K=Object(w.a)((function(t){var e={padding:t.spacing(3)};return F.forEach((function(t){e["& ."+t]={backgroundColor:t}})),{root:e}}))(q);s.a.render(Object(G.jsx)(r.a.StrictMode,{children:Object(G.jsx)(K,{})}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.25ac9cec.chunk.js.map